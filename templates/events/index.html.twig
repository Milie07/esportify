{% extends 'base.html.twig' %}

{% block title %}Événements — Esportify{% endblock %}

{% block body %}
    <div class="container-fluid mx-auto">  
        <!-- Logo Esportify  -->
        <div class="container-lg text-center">
            <img class="img-logo img-fluid" src="{{ asset('build/images/logo/logo-modifie.png') }}" alt="logo esportify">
        </div>
        <!-- Titre de la page -->
        <h1 class="text-clair2 text-center pt-2">Tous les événements</h1>
        <!-- Filtre d'événements -->
        <div class="container-lg mt-3 d-flex justfy-content-center gap-2">
            <!-- filtre -->
            <form class="form d-flex p-0" id="searchForm" autocomplete="off" novalidate>
                <!-- bouton loupe = déclenche l’application des filtres -->
                <div class="d-flex align-items-center justify-content-center">
                    <p class="text_description text-beige m-0">Filtrer par :</p>
                    <button class="filters_icones btn mx-2 p-0" 
                            type="button"  
                            data-bs-toggle="collapse" 
                            data-bs-target="#filters"
                            aria-controls="filters" 
                            aria-expanded="false" 
                            aria-label="Afficher les filtres"> 
                        <i class="fa-solid fa-sliders fa-xl"></i>
                    </button>
                
                
                </div>

                
            </form>
        </div>  

        <div class="collapse mt-2" id="filters">
            <div class="container-lg">
                <div class="row g-3 align-items-end" id="filtersContent">
                    <div class="col-12 col-md-4">
                        <label class="form-label text_description text-clair2" for="organizerSelect" >Organisateur</label>
                        <select class="input_filter form-select form-select-sm text_description" id="organizerSelect">
                            <option value="all">Tous</option>
                            <!-- complété dynamiquement -->
                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label class="form-label text_description text-clair2" for="dateAt">À partir de</label>
                        <input class="form-control input_filter" id="dateAt" type="datetime-local" aria-label="Date minimale">
                    </div>

                    <div class="col-12 col-md-4">
                        <label class="form-label text_description text-clair2" for="playersCount" >Nombre de joueurs :</label>
                        <input class="form-control input_filter" id="playersCount" type="number" min="0" step="1" placeholder="0">
                    </div>

                    <div class="d-flex justify-content-center">
                        <button class="btn-custom-md-green btn btn-greenFluo" id="resetFilters">Réinitialiser</button>
                        <button class="filters_icones btn mx-2 p-0" id="applyFiltersBtn" type="submit" form="searchForm" aria-label="Rechercher">
                            <i class="fa-solid fa-magnifying-glass fa-xl"></i>
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <div class="container-sm text-clair2">
            <h2 class="text-center pt-2 mt-3">A toi de jouer !</h2>
            <p class="text-description">A l'horizon où les batailles se dessinent, retrouve ici l'ensemble des tournois organisés sur Esportify, du plus chill au plus compétitif. Que tu sois un débutant intrépide ou un gamer chevronné, il y aura toujours un challenge taillé pour toi. Consulte les détails, inscris-toi, et entre dans l'arène.</p>
        </div>

    <!-- cartes événements -->
        <section class="container-fluid">
            <div class="row g-4" id="eventList" aria-live="polite"></div>
        </section>

        <template id="eventCardTemplate">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card">
                    <img class="card-img-top rounded event-img" src="" alt="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center text-lightBlue">
                        <h3 class="text-decoration-underline event-title">Titre</h3>
                        <p class="text_description event-dates">Du ... au ...</p>
                        <p class="text_description">Nombre de joueurs : <span class="event-players">0/0</span></p>
                        <div>
                            <button class="btn-custom-md-green btn btn-greenFluo btn-details" type="button" data-bs-toggle="modal" data-bs-target="#modalEvent">Plus de détail
                            </button>
                        </div>
                        <div class="mt-2 w-100 d-flex justify-content-between">
                        <button class="register_icone btn">
                            <i class="fa-solid fa-user-plus fa-lg text-lightBlue"></i>
                        </button>
                        <button class="favoris_icone btn">
                            <i class="fa-solid fa-star fa-lg text-lightBlue"></i>
                        </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <div class="text-center mt-4">
            <a class="btn-custom-lg-clair btn btn-clair2 mb-4" href="{{ path('app_home') }}">Retour à l'accueil</a>
        </div>        
    </div> <!-- Fermeture du Container principal -->

    <!-- Modale Détail -->
    <div class="modal fade" id="modalEvent" tabindex="-1" aria-hidden="true" aria-labelledby="modalEventTitle">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content rounded-4">
                <div class="text-center">
                    <div class="p-0 m-0">
                        <img class="w-100 rounded-top-4 border border-white p-0" id="modalEventImg" src="" alt="">
                        <h3 class="modal-title text-darkBlue" id="modalEventTitle"></h3>
                    </div>
                </div>
                    <div class="text_description text-lightBlue modal-body d-flex flex-column justify-content-center align-items-center">

                        <h4 class="text-darkBlue" id="modalEventTagline">Le tournoi où seuls les plus solides survivent</h4>

                        <p class="p-0 mb-2" id="modalEventDesc"></p>

                        <p class="p-0 m-0"><span id="modalEventDates"</span></p>

                        <p class="p-0 m-0">Nombre de joueurs : <span id="modaleEventPlayers"></span></p>

                        <p class="p-0 mb-2" id="modalEventGauge"></p>

                        <p class="p-0 m-0">Crée par <span id="modalEventOrganizer"</span></p>

                        <p class="p-0 mb-2"><span id="modalEventStatus"</span></p>

                        <div class="mt-2 w-100 d-flex justify-content-between align-items-center">
                            <button class="btn register_icone" id="modalBtnSubscribeIcon" type="button" title="S'inscrire">
                                <i class="fa-solid fa-user-plus fa-lg text-lightBlue"></i>
                            </button>
                            <button class="btn-custom-sm-green btn btn-greenFluo mb-3" id="modalBtnJoin" type="button">Rejoindre</button>
                            <button class="btn favoris_icone">
                                <i class="fa-solid fa-star fa-lg text-lightBlue" type="button" title="Ajouter au favoris"></i>
                            </button>
                        </div>
                            <button class="btn btn-close mb-3" id="modalBtnFav" type="button" data-bs-dismiss="modal" aria-label="Fermer la fenêtre"></button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}